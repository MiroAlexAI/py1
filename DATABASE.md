# Схема базы данных ChatList

В качестве СУБД используется **SQLite**. База данных спроектирована по принципам нормализации для обеспечения целостности данных и быстрого поиска.

## Таблицы

### 1. `prompts` (История запросов)
Хранит все текстовые промты, введенные пользователем.

| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `id` | INTEGER PK | Уникальный ID запроса (Auto Increment) |
| `date` | TEXT | Дата и время создания в формате ISO-8601 |
| `prompt` | TEXT | Полный текст запроса к нейросети |
| `tags` | TEXT | Метаданные (теги) для быстрой фильтрации |

### 2. `models` (Настройки нейросетей)
Хранит конфигурации API для различных моделей.

| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `name` | TEXT PK | Уникальное имя модели (например, 'GPT-4o') |
| `api_url` | TEXT | Базовый URL для запросов к API |
| `api_id` | TEXT | Имя ключа в `.env` (например, 'OPENROUTER_KEY') |
| `is_active` | INTEGER | Флаг активности (1 — включена, 0 — выключена) |

### 3. `results` (Сохраненные ответы)
Хранит ответы от нейросетей, которые пользователь отметил для сохранения.

| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `id` | INTEGER PK | Уникальный ID записи (Auto Increment) |
| `prompt_id` | INTEGER FK | Ссылка на `prompts.id` |
| `model_name` | TEXT | Название модели в момент получения ответа |
| `response` | TEXT | Текст ответа нейросети |
| `date` | TEXT | Дата и время сохранения записи |

### 4. `settings` (Конфигурация приложения)
Хранит системные настройки программы.

| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `key` | TEXT PK | Имя настройки (например, 'default_timeout') |
| `value` | TEXT | Значение настройки |

## Связи (Relations)
- **prompts -> results**: Один промт может иметь несколько сохраненных результатов (1:N). При удалении промта рекомендуется каскадное удаление результатов.
- **models -> results**: Таблица `results` хранит имя модели как текст (денормализация), чтобы сохранить информацию даже если настройки модели в таблице `models` изменятся или будут удалены.

## Индексы
- Индекс по полю `date` в таблице `prompts` для быстрой сортировки истории.
- Индекс по полю `prompt_id` в таблице `results` для быстрой выборки ответов к запросу.
