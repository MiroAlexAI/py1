# План разработки ChatList

На основании спецификации `PROJECT2.md`, реализация программы будет разбита на следующие этапы для обеспечения модульности и надёжности (SRE-подход).

## Этап 1: Подготовка окружения и архитектуры
1.  **Структура проекта**: Создание базовых модулей:
    - `main.py` — точка входа и графический интерфейс (PyQt).
    - `db.py` — инкапсуляция логики SQLite (CRUD).
    - `network.py` — асинхронное взаимодействие с API (httpx/asyncio).
    - `models_logic.py` — бизнес-логика обработки моделей и интеграция с `.env`.
2.  **Конфигурация**: Создание шаблона `.env` и настройка модуля `logging` для записи в `chatlist.log`.

## Этап 2: Разработка слоя данных (Database Layer)
1.  **Инициализация БД**: Создание таблиц `prompts`, `models`, `results`, `settings` в `db.py`.
2.  **Реализация CRUD**:
    - Методы добавления/удаления/редактирования моделей.
    - Методы записи истории промтов.
    - Логика связывания результатов с конкретным промтом (Foreign Keys).

## Этап 3: Сетевой движок (Network & Engine)
1.  **Асинхронный клиент**: Настройка `httpx.AsyncClient` в `network.py`.
2.  **Параллелизм**: Реализация `asyncio.gather` для одновременной отправки запроса во все активные модели.
3.  **Устойчивость (Reliability)**: 
    - Обработка таймаутов и сетевых ошибок.
    - Возврат структурированного статуса (Success/Error) для каждой модели.

## Этап 4: Графический интерфейс (UI Layout)
1.  **Главное окно**:
    - Секция ввода промта (QTextEdit) и выбора из истории.
    - Временная таблица результатов (QTableView) с поддержкой чекбоксов.
2.  **Управление моделями**: Отдельное окно/виджет для редактирования списка API через `QSqlTableModel`.

## Этап 5: Интеграция логики и интерфейса [COMPLETED]
1.  **Связка UI и Async**: Использование `qasync` для интеграции asyncio с PyQt6 (избежание "замерзания").
2.  **Поиск и Сортировка**: Применение `QSortFilterProxyModel` для поиска по ответам и сортировки по именам моделей.

## Этап 6: Финализация и Экспорт [COMPLETED]
1.  **Сохранение**: Логика переноса выбранных (Selected) строк в постоянную БД SQLite.
2.  **Экспорт данных**: Реализация выгрузки в Markdown (таблица) и JSON.
3.  **Полировка**: Применение премиального стиля QSS (Modern Dark Theme) для "Rich Aesthetics".
